protocol EmptyValue

impl EmptyValue for String = ""
impl EmptyValue for Array = []

fn* split(val, init) {
  init ||= val[EmptyValue]  
  let chunk = init
  for elem of this {
    if elem == val {
      yield chunk
      chunk = init
    } else {
      chunk = chunk::push(elem)
    }
  }
  yield chunk
}

"
a
b
c
"
  ::split("\n")
  ::take(10)
  ::as_array()
  ::log()

[1 2 3 4 5 0 3 4 5 6]
  ::split(0 [])
  ::take(10)
  ::as_array()
  ::log()
